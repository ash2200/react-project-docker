pipeline {
    agent any

    stages {
        
        stage("builing image") {    
            steps {
                sh '''
                #!/bin/bash
                docker build -t singhabhinav/react-project -f Dockerfile_dev .
                '''
            }
        }
        stage("Run unit testcases") {    
            steps {
                sh '''
                #!/bin/bash
                docker run -e CI=true singhabhinav/react-project npm run test
                '''
            }
        }
        
        stage("final deployment") {
            steps {
                echo "Deploying to Elasticbeanstalk"
            }
        }
    }
}
